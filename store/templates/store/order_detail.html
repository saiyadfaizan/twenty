{% extends 'store/main.html' %}
{% load static %}
{% block content %}
<div class="row">
    <div class="col-lg-12">
        <div class="box-element">
            <a class="btn btn-outline-dark" href="{% url 'order_history' %}">&#x2190; Back to Orders</a>
            <hr>
        </div>

        <div class="container">

            <div class="text-center">
                <br>
                <h1 class="text-center product_title">
                    Order Details
                </h1>
                <br>
                <table class="table table-bordered">
                    <tr>
                        <td class="text-left" colspan="2">
                            <strong>Order:</strong> #{{ order.id }}
                            <br>
                            <strong>Date: </strong>{{ order.date_ordered|date:"d M Y" }}
                            <br>
                            <strong>Order Total:</strong>&#x20B9;{{ order.get_cart_total|floatformat:2 }}
                            <br>
                            <strong>Payment Status:</strong>Completed.
                        </td>
                        <td class="text-left" colspan="2">
                            <strong>Username: </strong>{{user.username}}
                            <br>
                            <strong>Name: </strong>{{user.first_name}} {{user.last_name}}
                            <br>
                            <strong>Email: </strong>{{user.email}}
                            <br>
                            <strong>Transaction ID:</strong>{{order.transaction_id}}
                            <br>
                            <strong>Order Status:</strong> {{ order.status }}


                        </td>
                    </tr>
                    <tr>
                        <td><b>Product Description</b></td>
                        <td><b>Qty</b></td>
                        <td><b>Image</b></td>
                        <td><b>Unit Price</b></td>
                    </tr>
                    {% for item in order_items %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td>{{ item.quantity }}</td>
                        <td><img class="row-image" src="{{item.product.imageURL}}"></td>
                        <td>&#x20B9;{{item.product.price|floatformat:2}}</td>

                    </tr>
                    {% endfor %}
                    <tr>
                        <td class="text-right" colspan="3"><b>Total</b></td>
                        <td>&#x20B9;{{ order.get_cart_total|floatformat:2 }}</td>
                    </tr>
                    <tr>
                        <td class="text-right" colspan="3"><b>Total Paid</b></td>
                        <td>&#x20B9;{{ order.get_cart_total|floatformat:2 }}</td>
                    </tr>
                    <tr>
                        <td class="text-left" colspan="2">
                            <b>Shipping address:</b> <br>
                            {{shipping.address}}, <br>
                            {{shipping.city}}, <br>
                            {{shipping.state}}
                            {{shipping.zipcode}}
                        </td>
                        <td class="text-left" colspan="2">
                            <b>Payment Details:</b> <br>
                            The order #{{ order.id }} has been paid successfully
                        </td>
                    </tr>
                </table>

            </div>
        </div>
        <br>
        <br>
    </div>
</div>

{% endblock content %}